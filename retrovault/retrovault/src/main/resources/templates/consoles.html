<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head th:replace="~{fragments/head :: header}"></head>

<body>

    <div class="container">
        
        <div th:replace="~{fragments/nav :: navbar}"></div>

        <div class="d-flex justify-content-between align-items-center mt-4 mb-3">
            <h1>ğŸ•¹ï¸ Mis Consolas</h1>
            <a th:href="@{/consoles/new}" class="btn btn-primary">+ Nueva Consola</a>
        </div>

        <table class="table table-striped table-hover shadow-sm bg-white rounded">
            <thead class="table-dark">
                <tr>
                    <th>Nombre</th>
                    <th>CompaÃ±Ã­a</th>
                    <th>Fecha Registro</th> <th>Juegos</th>
                    <th>Acciones</th>
                </tr>
            </thead>
            <tbody>
                <tr th:each="c : ${consoles}">
                    
                    <td th:text="${c.name}" style="font-weight: bold;">Sega Mega Drive</td>
                    
                    <td th:text="${c.company}">Sega</td>
                    
                    <td th:text="${c.createdAt != null} ? ${#temporals.format(c.createdAt, 'dd/MM/yyyy')} : '-'">
                        01/01/2023
                    </td>
                    
                    <td>
                        <span class="badge bg-info text-dark" 
                              th:text="${c.games != null ? c.games.size() + ' juegos' : '0 juegos'}">
                            0 juegos
                        </span>
                    </td>
                    
                    <td>
                        <a th:href="@{/consoles/edit/{id}(id=${c.id})}" class="btn btn-sm btn-warning">âœï¸ Editar</a>
                        <a th:href="@{/consoles/delete/{id}(id=${c.id})}" class="btn btn-sm btn-danger" 
                           onclick="return confirm('Â¿Borrar esta consola borrarÃ¡ tambiÃ©n sus juegos asociados?');">ğŸ—‘ï¸ Borrar</a>
                    </td>
                </tr>
            </tbody>
        </table>

        <div th:if="${consoles.empty}" class="alert alert-warning text-center">
            No tienes consolas registradas. Â¡AÃ±ade tu primera consola! ğŸ‘‡
        </div>

    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>